<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LinguaCat - Consulta de Recursos Ling√º√≠stics</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* === estilos modernos === */
    :root {
      --primary: #2c3e50;
      --accent: #3498db;
      --gray: #6c757d;
      --shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    }
    body { font-family: 'Segoe UI', system-ui, sans-serif; margin:0; background:#fff; color:#333; }
    header { background:linear-gradient(135deg, var(--primary), #1a2530); color:#fff; padding:1.5rem 0; text-align:center; }
    .logo { display:flex; align-items:center; justify-content:center; gap:10px; }
    .logo i { font-size:2rem; }
    .search-container { margin-top:1rem; display:flex; justify-content:center; }
    .search-container input { width:300px; padding:10px; border-radius:20px 0 0 20px; border:1px solid #ccc; }
    .search-container button { background:var(--accent); border:none; color:white; padding:10px 15px; border-radius:0 20px 20px 0; cursor:pointer; }
    main { max-width:800px; margin:2rem auto; padding:0 1rem; }
    .loading { display:none; text-align:center; color:var(--accent); }
    .error-message { display:none; background:#fff5f5; color:#c53030; padding:1rem; border-radius:8px; margin:1rem 0; }
    .word-result { display:none; background:white; border-radius:12px; box-shadow:var(--shadow); padding:1.5rem; }
    .word-title { font-size:1.8rem; font-weight:bold; color:var(--primary); margin-bottom:1rem; }
    .definition-list li { margin-bottom:.5rem; padding-left:10px; border-left:3px solid var(--accent); }
    .synonym { background:#e9ecef; padding:5px 12px; border-radius:15px; margin:3px; display:inline-block; cursor:pointer; }
    .synonym:hover { background:var(--accent); color:white; }
  </style>
</head>
<body>
  <header>
    <div class="logo"><i class="fas fa-language"></i><h1>LinguaCat</h1></div>
    <div class="search-container">
      <input type="text" id="word-search" placeholder="Escriu una paraula (ex: ordinador, casa...)">
      <button id="search-btn"><i class="fas fa-search"></i></button>
    </div>
  </header>

  <main>
    <div class="loading" id="loading"><p>üîÑ Buscant informaci√≥...</p></div>
    <div class="error-message" id="error-message"><span id="error-text"></span></div>

    <div class="word-result" id="word-result">
      <div class="word-title" id="word"></div>
      <div><span id="phonetic"></span> <span id="grammatical"></span></div>

      <h3>Definicions</h3>
      <ul class="definition-list" id="definition-list"></ul>

      <h3>Sin√≤nims</h3>
      <div id="synonyms-list"></div>

      <h3>Ant√≤nims</h3>
      <div id="antonyms-list"></div>

      <h3>Exemples</h3>
      <div id="examples-list"></div>
    </div>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("search-btn");
      const input = document.getElementById("word-search");
      const loading = document.getElementById("loading");
      const errorBox = document.getElementById("error-message");
      const errorText = document.getElementById("error-text");
      const resultBox = document.getElementById("word-result");

      btn.addEventListener("click", search);
      input.addEventListener("keypress", e => { if (e.key === "Enter") search(); });

      async function search() {
        const term = input.value.trim();
        if (!term) return showError("Introdueix una paraula.");

        loading.style.display = "block";
        errorBox.style.display = "none";
        resultBox.style.display = "none";

        try {
          const res = await fetch(`/api/search?word=${encodeURIComponent(term)}`);
          const data = await res.json();
          if (data.error) throw new Error(data.error);
          renderData(data);
        } catch (err) {
          showError(err.message);
        } finally {
          loading.style.display = "none";
        }
      }

      function renderData(data) {
        document.getElementById("word").textContent = data.word;
        document.getElementById("phonetic").textContent = data.phonetic || "";
        document.getElementById("grammatical").textContent = data.grammatical || "";

        const defs = document.getElementById("definition-list");
        defs.innerHTML = "";
        data.definitions.forEach(d => {
          const li = document.createElement("li");
          li.textContent = d;
          defs.appendChild(li);
        });

        const syns = document.getElementById("synonyms-list");
        syns.innerHTML = "";
        data.synonyms.forEach(s => {
          const span = document.createElement("span");
          span.className = "synonym";
          span.textContent = s;
          span.onclick = () => { input.value = s; search(); };
          syns.appendChild(span);
        });

        const ants = document.getElementById("antonyms-list");
        ants.innerHTML = "";
        data.antonyms.forEach(a => {
          const span = document.createElement("span");
          span.className = "synonym";
          span.textContent = a;
          span.onclick = () => { input.value = a; search(); };
          ants.appendChild(span);
        });

        const exs = document.getElementById("examples-list");
        exs.innerHTML = "";
        data.examples.forEach(e => {
          const p = document.createElement("p");
          p.textContent = e;
          exs.appendChild(p);
        });

        resultBox.style.display = "block";
      }

      function showError(msg) {
        errorText.textContent = msg;
        errorBox.style.display = "block";
      }
    });
  </script>
</body>
</html>
